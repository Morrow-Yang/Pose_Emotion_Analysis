# Pose_Emotion_Analysis

Pose-based emotion analysis with AlphaPose (2D) and BVH motion capture (3D). This repository includes feature extraction, statistical analysis (v1â€“v5), and innovation scripts for new features and temporal analysis.

## Instructions
This section explains how to run the key analysis and innovation scripts.

### 2D Temporal Analysis (CAER-S)
Extract kinetic energy (velocity/acceleration) from AlphaPose JSON results.
```bash
python scripts/innovation/temporal_motion_analysis.py --root "outputs/alphapose/outputs/CAER-S/train" --out "outputs/analysis/temporal/v1"
```
**Arguments:**
- `--root`: Path to the directory containing emotion sub-folders (Angry, Happy, etc.) with `alphapose-results.json`.
- `--out`: Directory where CSV features and summary statistics will be saved.

### 2D Visualization
Generate 4-panel research plots (Velocity, Acceleration, Comparison).
```bash
python scripts/innovation/plot_temporal_results.py --csv "outputs/analysis/temporal/v1/temporal_motion_features.csv" --out "outputs/analysis/temporal/v1"
```
**Arguments:**
- `--csv`: Path to the motion features CSV generated by the previous step.
- `--out`: Directory to save the PNG/PDF plots.

### 3D BVH Analysis (Ground Truth)
Parse 3D motion capture files using Forward Kinematics to calculate real-world velocity.
```bash
python scripts/innovation/bvh_temporal_analysis.py --root "data/raw/kinematic-dataset-of-actors..." --out "outputs/analysis/temporal_3d/v1"
```
**Arguments:**
- `--root`: Root directory of the Kinematic Dataset (containing the `BVH/` folder and `file-info.csv`).
- `--out`: Directory to save the 3D features and summary.

### Cross-Modal Validation
Compare 2D estimates from AlphaPose against 3D Ground Truth from BVH.
```bash
python scripts/innovation/compare_2d_3d.py --csv2d "outputs/analysis/..." --csv3d "outputs/analysis/..." --out "outputs/analysis/validation"
```
**Arguments:**
- `--csv2d`: Path to the 2D features CSV.
- `--csv3d`: Path to the 3D features CSV.
- `--out`: Directory to save correlation plots.

## Project Structure
```
AIemotion/
  data/
    raw/                    # original datasets (not tracked)
      CAER-S/
      kinematic-dataset-of-actors-expressing-emotions-2.1.0/
    external/               # third-party tools (not tracked)
      AlphaPose-master/
  outputs/                  # generated outputs (not tracked)
    alphapose/
    features/
    analysis/
      temporal/             # 2D kinetic results
      temporal_3d/          # 3D BVH results
      validation/           # 2D/3D comparison plots
    innovation/
  scripts/
    analysis/               # analysis_v1-v5, run_all_v1_v5
    features/               # metrics-2.py, alphapose_extra_features.py, bvh_*.py
    innovation/             # Core scripts for temporal and 3D analysis
      temporal_motion_analysis.py  # 2D extractor
      bvh_temporal_analysis.py     # 3D extractor
      compare_2d_3d.py             # Validation
      utils_bvh_parser.py         # 3D Parser engine
  README.md
```

## Data Sources
- **CAER-S**: Contextualized Affect Representations from Scenes.
- **Kinematic Dataset of Actors Expressing Emotions (v2.1.0)**: BVH motion capture sequences.

> Note: Datasets are not included in this repo. Please download them from their official sources.

## AlphaPose Models
AlphaPose models and weights are not included. Use the official AlphaPose repository to download:
- YOLO detector weights
- FastPose model
